"use strict";var socket=function(){function f(){u()}function e(t){var f=t.data,i,r,u;try{if(i=JSON.parse(f),i.action)for(r in n[i.action])u=n[i.action][r],u(i),u.once&&n[i.action].splice(r,1)}catch(e){console.log(e.message,e.stack);console.log(f)}}function o(){console.log("error",arguments);t=null;setTimeout(function(){r()},5e3)}function r(){t=new WebSocket("ws://localhost");t.onopen=f;t.onmessage=e;t.onerror=o}function u(){var n,e,o;if(t!=null&&t.readyState!==0){var r=!0,u=!1,f=undefined;try{for(n=i[Symbol.iterator]();!(r=(e=n.next()).done);r=!0)o=e.value,t.send(JSON.stringify(o))}catch(s){u=!0;f=s}finally{try{!r&&n["return"]&&n["return"]()}finally{if(u)throw f;}}i=[]}}function s(n,t){i.push({action:n,contents:t});u()}var t=null,n={},i=[];return r(),{on:function(t,i){n[t]||(n[t]=[]);n[t].push(i)},once:function(t,i){n[t]||(n[t]=[]);i.once=!0;n[t].push(i)},off:function(t,i){var r=n[t].indexOf(i);r>-1&&n[t].splice(r,1)},emit:s}}();